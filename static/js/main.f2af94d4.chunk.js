(this["webpackJsonpsearch-repos"]=this["webpackJsonpsearch-repos"]||[]).push([[0],{24:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),s=n.n(c),i=(n(24),n(5)),o=n(7),u=n(17),l=n.n(u),j=(n(30),n(1)),d=function(e){var t=e.currentPage,n=e.totalPages,a=e.handleChangePage;return Object(j.jsx)(l.a,{forcePage:t,pageCount:n,containerClassName:"pagination",onPageChange:a,subContainerClassName:"pages pagination",activeClassName:"active"})},p=(n(32),function(){return Object(j.jsx)("div",{className:"lds-css ng-scope",children:Object(j.jsx)("div",{className:"lds-rolling",children:Object(j.jsx)("div",{})})})}),b=(n(33),function(){return Object(j.jsx)("div",{className:"empty__container",children:Object(j.jsx)("p",{className:"empty__title",children:"Nothing to show..."})})}),h=n(2),O=n(10),g=(n(34),function(e){var t=e.name,n=e.html_url,a=e.stargazers_count;return Object(j.jsxs)("li",{className:"results-item__container",children:[Object(j.jsx)("a",{className:"results-item__text results-item__text--link",href:n,children:t}),Object(j.jsxs)("p",{className:"results-item__text",children:[" Stars - ",a]})]})}),f=(n(35),function(e){var t=e.list;return Object(j.jsx)("div",{className:"results__container",children:Object(j.jsx)("ul",{className:"results__list",children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=Object(O.a)(e,["id"]);return Object(j.jsx)(g,Object(h.a)({},n),t)}))})})}),v=(n(36),function(e){var t=e.dir,n=e.handleClick;return Object(j.jsx)("div",{className:"sort-dir__container",children:Object(j.jsxs)("button",{className:"sort-dir__button",onClick:n,children:["Change sort direction(now ",t,")"]})})}),m=n(3),x=n.n(m),_=n(4),C=n(18),P={},N=null,y=function(){var e=Object(_.a)(x.a.mark((function e(t){var n,a,r,c,s,i,o,u,l,j,d,p,b,h;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.input,a=t.page,r=t.dir,c=t.sort,s=void 0===c?"stars":c,i="".concat("https://api.github.com","/search/repositories?q=").concat(n,"&per_page=").concat(30,"&page=").concat(a,"&order=").concat(r,"&sort=").concat(s),!P[i]){e.next=4;break}return e.abrupt("return",P[i]);case 4:return N&&N.abort(),o=new AbortController,N=o,e.next=9,fetch(i,{signal:o.signal});case 9:return u=e.sent,e.next=12,u.json();case 12:if(l=e.sent,j=l.items,d=l.total_count,N=null,Object.keys(P).length>10){p=Object(C.a)(Object.getOwnPropertyNames(P));try{for(p.s();!(b=p.n()).done;)h=b.value,delete P[h]}catch(O){p.e(O)}finally{p.f()}}return P[i]={items:j,totalCount:d},e.abrupt("return",{items:j,totalCount:d});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S="REPOS_ACTION:SET_REPOS",T="REPOS_ACTION:SET_TOTAL_REPOS",w="REPOS_ACTION:SET_IS_LOADING",k="REPOS_ACTION:TO_DEFAULT",E=function(e){return{type:S,payload:e}},I=function(e){return{type:w,payload:e}},A=function(e){return function(){var t=Object(_.a)(x.a.mark((function t(n){var a,r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(I(!0)),t.next=4,y(e);case 4:a=t.sent,r=a.items,c=a.totalCount,n(E(r)),n({type:T,payload:c}),n(I(!1)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("Bad news...",t.t0),n(E([]));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){var t=Object(o.b)(),n=Object(a.useState)("asc"),r=Object(i.a)(n,2),c=r[0],s=r[1],u=Object(o.c)((function(e){return e.repos})),l=u.items,j=u.totalItems,d=u.isLoading,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=Object(a.useState)(0),r=Object(i.a)(n,2),c=r[0],s=r[1];return{totalPages:Object(a.useMemo)((function(){return Math.ceil(e/t)}),[e,t]),currentPage:c,setCurrentPage:s}}(j),b=p.totalPages,g=p.currentPage,f=p.setCurrentPage,v=function(){var e=Object(_.a)(x.a.mark((function e(n){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.input,r=Object(O.a)(n,["input"]),t(a?A(Object(h.a)({dir:c,page:g+1,input:a},r)):{type:k});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(e,t,n){var r=Object(a.useCallback)(e,n);Object(a.useEffect)((function(){var e=setTimeout((function(){r()}),t);return function(){clearTimeout(e)}}),[r,t])}((function(){s("asc"),f(0),v({input:e,page:1,dir:"asc"})}),300,[e]),{isLoading:d,items:l,sortDir:c,totalPages:b,currentPage:g,handleChangePage:function(t){var n=t.selected;f(n),v({page:n+1,input:e})},handleChangeSortDir:function(){var t="asc"===c?"desc":"asc";s(t),f(0),v({dir:t,input:e,page:1})},getTableData:v}},D=function(e){var t=e.inputText,n=L(t),a=n.isLoading,r=n.items,c=n.sortDir,s=n.totalPages,i=n.currentPage,o=n.handleChangePage,u=n.handleChangeSortDir;return a?Object(j.jsx)(p,{}):(null===r||void 0===r?void 0:r.length)?Object(j.jsxs)("div",{children:[Object(j.jsx)(v,{handleClick:u,dir:c}),Object(j.jsx)(f,{list:r}),Object(j.jsx)(d,{currentPage:i,totalPages:s,handleChangePage:o})]}):Object(j.jsx)(b,{})},R=(n(38),function(e){var t=e.handleChange,n=e.value;return Object(j.jsxs)("div",{className:"search__container",children:[Object(j.jsx)("p",{className:"search__title",children:"Go ahead, search repositories"}),Object(j.jsx)("input",{className:"search__input",type:"text",placeholder:"Search",value:n,onChange:t})]})}),M=n(6),B=n(19),G={items:[],totalItems:0,isLoading:!1},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(h.a)(Object(h.a)({},e),{},{items:t.payload});case T:return Object(h.a)(Object(h.a)({},e),{},{totalItems:t.payload});case w:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.payload});case k:return G;default:return e}},q=[B.a],z=M.a.apply(void 0,q),F={repos:J},U=Object(M.c)(Object(h.a)({},F)),H=Object(M.d)(U,{},z),K=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(j.jsxs)(o.a,{store:H,children:[Object(j.jsx)(R,{value:n,handleChange:function(e){r(e.target.value)}}),Object(j.jsx)(D,{inputText:n})]})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(K,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f2af94d4.chunk.js.map